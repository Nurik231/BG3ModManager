<local:CollectionDownloadWindowBase
	x:Class="DivinityModManager.Windows.CollectionDownloadWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:adonisUI="clr-namespace:AdonisUI;assembly=AdonisUI"
	xmlns:ag="clr-namespace:WpfAutoGrid;assembly=WpfAutoGrid"
	xmlns:behavior="clr-namespace:DivinityModManager.Controls.Behavior"
	xmlns:controls="clr-namespace:DivinityModManager.Controls"
	xmlns:conv="clr-namespace:DivinityModManager.Converters"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:dapp="clr-namespace:DivinityModManager;assembly=DivinityModManagerCore"
	xmlns:data="clr-namespace:DivinityModManager.Models.NexusMods;assembly=DivinityModManagerCore"
	xmlns:dd="urn:gong-wpf-dragdrop"
	xmlns:local="clr-namespace:DivinityModManager.Windows"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:reactiveui="http://reactiveui.net"
	xmlns:views="clr-namespace:DivinityModManager.Controls.Views"
	xmlns:vm="clr-namespace:DivinityModManager.ViewModels"
	Title="NexusMods Collection Downloader"
	d:DataContext="{d:DesignInstance vm:CollectionDownloadWindowDesignViewModel,
	                                 IsDesignTimeCreatable=True}"
	d:DesignHeight="936"
	d:DesignWidth="1024"
	Background="{DynamicResource {x:Static adonisUI:Brushes.Layer0BackgroundBrush}}"
	Foreground="{DynamicResource {x:Static adonisUI:Brushes.AccentForegroundBrush}}"
	TitleBarBackground="#f57842"
	TitleBarForeground="{DynamicResource {x:Static adonisUI:Brushes.AccentForegroundBrush}}"
	mc:Ignorable="d">
	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="../Themes/MainResourceDictionary.xaml" />
			</ResourceDictionary.MergedDictionaries>
			<GridView
				x:Key="ModsListViewGridView"
				AllowsColumnReorder="True"
				ColumnHeaderContainerStyle="{StaticResource GridViewLeftContainerStyle}">
				<GridView.Columns>
					<GridViewColumn
						Width="40"
						behavior:ScreenReaderHelperBehavior.HelpText="The mod order index column"
						behavior:ScreenReaderHelperBehavior.Name="Index"
						Header="#"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<TextBlock
									Margin="2,0,2,0"
									Background="Transparent"
									Text="{Binding Index}" />
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="Auto"
						Header="Enabled"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<CheckBox
									HorizontalAlignment="Center"
									VerticalAlignment="Center"
									IsChecked="{Binding IsSelected}"
									Style="{StaticResource VanillaCheckBox}" />
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="400"
						Header="Name"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<controls:ModEntryGrid>
									<controls:ModEntryGrid.ColumnDefinitions>
										<ColumnDefinition Width="*" />
										<ColumnDefinition Width="Auto" />
									</controls:ModEntryGrid.ColumnDefinitions>
									<TextBlock
										HorizontalAlignment="Stretch"
										AutomationProperties.HelpText="{Binding Text, RelativeSource={RelativeSource Self}}"
										Tag="{Binding}"
										Text="{Binding Name}"
										ToolTip="{StaticResource NexusModsCollectionModToolTip}" />
								</controls:ModEntryGrid>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="100"
						Header="Author"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<Grid>
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*" SharedSizeGroup="AuthorNameColumn" />
										<ColumnDefinition Width="16" />
									</Grid.ColumnDefinitions>
									<TextBlock Style="{StaticResource TextBlockAutoToolTip}" Text="{Binding Author, Mode=OneWay}" />
									<Image
										Grid.Column="1"
										MaxWidth="16"
										MaxHeight="16"
										HorizontalAlignment="Right"
										RenderOptions.BitmapScalingMode="HighQuality"
										Source="{Binding AuthorAvatarUrl, Converter={StaticResource UriToBitmapImageConverter}}"
										Stretch="UniformToFill"
										Visibility="{Binding AuthorAvatarVisibility}" />
								</Grid>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="Auto"
						Header="Version"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<TextBlock Style="{StaticResource TextBlockAutoToolTip}" Text="{Binding Version, Mode=OneWay}" />
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="Auto"
						Header="Category"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<TextBlock Style="{StaticResource TextBlockAutoToolTip}" Text="{Binding Category, Mode=OneWay}" />
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="Auto"
						Header="Optional"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<CheckBox
									Focusable="False"
									IsChecked="{Binding IsOptional}"
									IsHitTestVisible="False" />
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Width="250"
						Header="Nexus URL"
						HeaderTemplate="{StaticResource GridViewTextblockHeaderTemplate}">
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<controls:HyperlinkText DisplayText="{Binding NexusModsURLDisplayText}" URL="{Binding NexusModsURL}" />
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
				</GridView.Columns>
			</GridView>
			<controls:CardView
				x:Key="ModsListViewCardView"
				ItemContainerStyle="{StaticResource CardViewItemBase}"
				ItemHeight="312"
				ItemTemplate="{StaticResource NexusCollectionModCard}"
				ItemWidth="256" />
		</ResourceDictionary>
	</Window.Resources>
	<Border BorderBrush="LightGray" BorderThickness="1">
		<ag:AutoGrid
			Columns="*"
			RowCount="3"
			Rows="auto,*,auto">
			<StackPanel
				HorizontalAlignment="Center"
				VerticalAlignment="Center"
				Orientation="Horizontal">
				<TextBlock
					x:Name="CollectionTitleTextBlock"
					Background="{DynamicResource {x:Static adonisUI:Brushes.Layer3BackgroundBrush}}"
					FontSize="24"
					Text="{Binding Title}"
					TextAlignment="Center"
					TextWrapping="Wrap" />
				<Image
					x:Name="AuthorImage"
					MaxWidth="16"
					MaxHeight="16"
					Margin="4"
					RenderOptions.BitmapScalingMode="HighQuality"
					Source="{Binding AuthorAvatar}"
					Stretch="UniformToFill"
					Visibility="{Binding AuthorAvatarVisibility}" />
				<Rectangle Height="2" Fill="LightGray" />
			</StackPanel>
			<ag:AutoGrid
				Columns="*"
				RowCount="2"
				Rows="auto,*">
				<Grid Background="{DynamicResource {x:Static adonisUI:Brushes.Layer4BackgroundBrush}}">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="240" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="240" />
					</Grid.ColumnDefinitions>
					<ToolBarTray>
						<ToolBar Margin="12,0,0,0">
							<ToggleButton
								x:Name="SetGridViewButton"
								ToolTip="View as List"
								ToolTipService.InitialShowDelay="0">
								<ToggleButton.Style>
									<Style BasedOn="{StaticResource {x:Static adonisUI:Styles.ToolbarToggleButton}}" TargetType="ToggleButton">
										<Style.Triggers>
											<Trigger Property="IsChecked" Value="False">
												<Setter Property="Content" Value="{StaticResource ListViewIcon}" />
											</Trigger>
											<Trigger Property="IsChecked" Value="True">
												<Setter Property="Content" Value="{StaticResource ListViewIconToggled}" />
											</Trigger>
										</Style.Triggers>
									</Style>
								</ToggleButton.Style>
							</ToggleButton>
							<ToggleButton
								x:Name="SetCardViewButton"
								ToolTip="View as Cards"
								ToolTipService.InitialShowDelay="0">
								<ToggleButton.Style>
									<Style BasedOn="{StaticResource {x:Static adonisUI:Styles.ToolbarToggleButton}}" TargetType="ToggleButton">
										<Style.Triggers>
											<Trigger Property="IsChecked" Value="False">
												<Setter Property="Content" Value="{StaticResource CardViewIcon}" />
											</Trigger>
											<Trigger Property="IsChecked" Value="True">
												<Setter Property="Content" Value="{StaticResource CardViewIconToggled}" />
											</Trigger>
										</Style.Triggers>
									</Style>
								</ToggleButton.Style>
							</ToggleButton>
							<Separator />
							<Button
								x:Name="EnableAllButton"
								Content="{StaticResource CheckboxCheckAllIcon}"
								Style="{DynamicResource {x:Static adonisUI:Styles.ToolbarButton}}"
								ToolTip="Enable All"
								ToolTipService.InitialShowDelay="0" />
							<Button
								x:Name="DisableAllButton"
								Content="{StaticResource CheckboxClearAllIcon}"
								Style="{DynamicResource {x:Static adonisUI:Styles.ToolbarButton}}"
								ToolTip="Disable All"
								ToolTipService.InitialShowDelay="0" />
						</ToolBar>
					</ToolBarTray>
					<TextBlock
						Grid.Column="1"
						FontSize="20"
						Foreground="{DynamicResource {x:Static adonisUI:Brushes.ForegroundBrush}}"
						Text="Mods"
						TextAlignment="Center" />
				</Grid>

				<Grid>
					<views:ModListView
						x:Name="ModsGridListView"
						DisplayMemberPath="DummyValue"
						Grid.IsSharedSizeScope="True"
						GridViewColumnHeader.Click="SortView"
						ItemsSource="{Binding Mods}"
						View="{StaticResource ModsListViewGridView}"
						Visibility="Visible" />
					<ListView
						x:Name="ModsCardListView"
						DisplayMemberPath="DummyValue"
						ItemsSource="{Binding Mods}"
						Style="{StaticResource CardViewBase}"
						View="{StaticResource ModsListViewCardView}"
						Visibility="Collapsed" />
				</Grid>

			</ag:AutoGrid>
			<UniformGrid
				Margin="4"
				HorizontalAlignment="Center"
				VerticalAlignment="Center"
				Rows="1">
				<Button
					x:Name="ConfirmButton"
					Margin="4,0"
					Padding="12,2"
					Background="{DynamicResource {x:Static adonisUI:Brushes.SuccessBrush}}"
					Content="Download" />
				<Button
					x:Name="CancelButton"
					Margin="4,0"
					Padding="12,2"
					Background="{DynamicResource {x:Static adonisUI:Brushes.ErrorBrush}}"
					Content="Cancel" />
			</UniformGrid>
		</ag:AutoGrid>
	</Border>
</local:CollectionDownloadWindowBase>
